(function(e){function n(e){return typeof e=="object"?e:{top:e,left:e}}var t=e.scrollTo=function(t,n,r){e(window).scrollTo(t,n,r)};t.defaults={axis:"xy",duration:parseFloat(e.fn.jquery)>=1.3?0:1};t.window=function(t){return e(window)._scrollable()};e.fn._scrollable=function(){return this.map(function(){var t=this,n=!t.nodeName||e.inArray(t.nodeName.toLowerCase(),["iframe","#document","html","body"])!=-1;if(!n)return t;var r=(t.contentWindow||t).document||t.ownerDocument||t;return e.browser.safari||r.compatMode=="BackCompat"?r.body:r.documentElement})};e.fn.scrollTo=function(r,i,s){if(typeof i=="object"){s=i;i=0}if(typeof s=="function")s={onAfter:s};if(r=="max")r=9e9;s=e.extend({},t.defaults,s);i=i||s.speed||s.duration;s.queue=s.queue&&s.axis.length>1;if(s.queue)i/=2;s.offset=n(s.offset);s.over=n(s.over);return this._scrollable().each(function(){function h(e){u.animate(l,i,s.easing,e&&function(){e.call(this,r,s)})}var o=this,u=e(o),a=r,f,l={},c=u.is("html,body");switch(typeof a){case"number":case"string":if(/^([+-]=)?\d+(\.\d+)?(px|%)?$/.test(a)){a=n(a);break}a=e(a,this);case"object":if(a.is||a.style)f=(a=e(a)).offset()}e.each(s.axis.split(""),function(e,n){var r=n=="x"?"Left":"Top",i=r.toLowerCase(),p="scroll"+r,d=o[p],v=t.max(o,n);if(f){l[p]=f[i]+(c?0:d-u.offset()[i]);if(s.margin){l[p]-=parseInt(a.css("margin"+r))||0;l[p]-=parseInt(a.css("border"+r+"Width"))||0}l[p]+=s.offset[i]||0;if(s.over[i])l[p]+=a[n=="x"?"width":"height"]()*s.over[i]}else{var m=a[i];l[p]=m.slice&&m.slice(-1)=="%"?parseFloat(m)/100*v:m}if(/^\d+$/.test(l[p]))l[p]=l[p]<=0?0:Math.min(l[p],v);if(!e&&s.queue){if(d!=l[p])h(s.onAfterFirst);delete l[p]}});h(s.onAfter)}).end()};t.max=function(t,n){var r=n=="x"?"Width":"Height",i="scroll"+r;if(!e(t).is("html,body"))return t[i]-e(t)[r.toLowerCase()]();var s="client"+r,o=t.ownerDocument.documentElement,u=t.ownerDocument.body;return Math.max(o[i],u[i])-Math.min(o[s],u[s])}})(jQuery);$(function(){var e=$(".nav-container");var t=$("nav");var n=15;var r=50;e.waypoint({handler:function(i,s){if(s=="down"){e.css({height:t.outerHeight()});t.stop().addClass("sticky").css("top",-t.outerHeight()).animate({top:n})}else{e.css({height:"auto"});t.stop().removeClass("sticky").css("top",t.outerHeight()+r).animate({top:""})}},offset:function(){return-t.outerHeight()-r}});var i=$("section");var s=$("nav a");i.waypoint({handler:function(e,t){var n;n=$(this);if(t==="up")n=n.prev();var r=$('nav a[href="#'+n.attr("id")+'"]');s.removeClass("selected");r.addClass("selected")},offset:"25%"});s.click(function(e){$.scrollTo($(this).attr("href"),{duration:200,offset:{left:0,top:-.15*$(window).height()}})})});(function(e,t,n,r,i){var s=e(r),o="waypoint.reached",u=function(e,n){e.element.trigger(o,n);if(e.options.triggerOnce){e.element[t]("destroy")}},a=function(e,t){var n=t.waypoints.length-1;while(n>=0&&t.waypoints[n].element[0]!==e[0]){n-=1}return n},f=[],l=function(t){e.extend(this,{element:e(t),oldScroll:0,waypoints:[],didScroll:false,didResize:false,doScroll:e.proxy(function(){var t=this.element.scrollTop(),r=t>this.oldScroll,i=this,s=e.grep(this.waypoints,function(e,n){return r?e.offset>i.oldScroll&&e.offset<=t:e.offset<=i.oldScroll&&e.offset>t}),o=s.length;if(!this.oldScroll||!t){e[n]("refresh")}this.oldScroll=t;if(!o){return}if(!r){s.reverse()}e.each(s,function(e,t){if(t.options.continuous||e===o-1){u(t,[r?"down":"up"])}})},this)});e(t).scroll(e.proxy(function(){if(!this.didScroll){this.didScroll=true;r.setTimeout(e.proxy(function(){this.doScroll();this.didScroll=false},this),e[n].settings.scrollThrottle)}},this)).resize(e.proxy(function(){if(!this.didResize){this.didResize=true;r.setTimeout(e.proxy(function(){e[n]("refresh");this.didResize=false},this),e[n].settings.resizeThrottle)}},this));s.load(e.proxy(function(){this.doScroll()},this))},c=function(t){var n=null;e.each(f,function(e,r){if(r.element[0]===t){n=r;return false}});return n},h={init:function(r,i){this.each(function(){var s=e.fn[t].defaults.context,u,h=e(this);if(i&&i.context){s=i.context}if(!e.isWindow(s)){s=h.closest(s)[0]}u=c(s);if(!u){u=new l(s);f.push(u)}var p=a(h,u),d=p<0?e.fn[t].defaults:u.waypoints[p].options,v=e.extend({},d,i);v.offset=v.offset==="bottom-in-view"?function(){var t=e.isWindow(s)?e[n]("viewportHeight"):e(s).height();return t-e(this).outerHeight()}:v.offset;if(p<0){u.waypoints.push({element:h,offset:null,options:v})}else{u.waypoints[p].options=v}if(r){h.bind(o,r)}if(i&&i.handler){h.bind(o,i.handler)}});e[n]("refresh");return this},remove:function(){return this.each(function(t,n){var r=e(n);e.each(f,function(e,t){var n=a(r,t);if(n>=0){t.waypoints.splice(n,1)}})})},destroy:function(){return this.unbind(o)[t]("remove")}},p={refresh:function(){e.each(f,function(t,r){var i=e.isWindow(r.element[0]),s=i?0:r.element.offset().top,o=i?e[n]("viewportHeight"):r.element.height(),a=i?0:r.element.scrollTop();e.each(r.waypoints,function(e,t){if(!t){return}var n=t.options.offset,i=t.offset;if(typeof t.options.offset==="function"){n=t.options.offset.apply(t.element)}else{if(typeof t.options.offset==="string"){var f=parseFloat(t.options.offset);n=t.options.offset.indexOf("%")?Math.ceil(o*(f/100)):f}}t.offset=t.element.offset().top-s+a-n;if(t.options.onlyOnScroll){return}if(i!==null&&r.oldScroll>i&&r.oldScroll<=t.offset){u(t,["up"])}else{if(i!==null&&r.oldScroll<i&&r.oldScroll>=t.offset){u(t,["down"])}else{if(!i&&a>t.offset){u(t,["down"])}}}});r.waypoints.sort(function(e,t){return e.offset-t.offset})})},viewportHeight:function(){return r.innerHeight?r.innerHeight:s.height()},aggregate:function(){var t=e();e.each(f,function(n,r){e.each(r.waypoints,function(e,n){t=t.add(n.element)})});return t}};e.fn[t]=function(n){if(h[n]){return h[n].apply(this,Array.prototype.slice.call(arguments,1))}else{if(typeof n==="function"||!n){return h.init.apply(this,arguments)}else{if(typeof n==="object"){return h.init.apply(this,[null,n])}else{e.error("Method "+n+" does not exist on jQuery "+t)}}}};e.fn[t].defaults={continuous:true,offset:0,triggerOnce:false,context:r};e[n]=function(e){if(p[e]){return p[e].apply(this)}else{return p.aggregate()}};e[n].settings={resizeThrottle:200,scrollThrottle:100};s.load(function(){e[n]("refresh")})})(jQuery,"waypoint","waypoints",this)